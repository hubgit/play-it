<!doctype html>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Play It</title>
<link rel="stylesheet" href="style.css">
<script src="search.js"></script>
<script src="parse.js"></script>
<script src="render.js"></script>

<nav>
    <a href="./">Play It</a>
    <small>find and play music albums</small>
</nav>

<form id="input">
    <input name="q" type="search" title="search">
    <button type="submit">search</button>
</form>

<div id="results"></div>

<script>
const query = new URLSearchParams(window.location.search)
const q = query.get('q')

if (q) {
  document.querySelector('#input').q.value = q
  const container = document.querySelector('#results')

  const append = html => {
    const element = document.createElement('div')
    element.innerHTML = html
    container.append(element)
  }

  search(q).then(items => items.map(parse).map(template).forEach(append))
}
</script>
